name: ci-test

on: 
  pull_request: 
    branches: 
    - main

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3
    
    - name: Setup Go
      uses: actions/setup-go@v3
      with:
        go-version-file: './go.mod'

    # List go version
    - name: List version
      run: go version

    # Run build of the application
    - name: Run build
      run: go build . 

    # Format code base to meet `go fmt` standard
    - name: Format code
      run: go fmt

    # Vet code
    - name: Run vet
      run: go vet .
      
    # Run testing on the code
    - name: Run tests
      run: go test -v
